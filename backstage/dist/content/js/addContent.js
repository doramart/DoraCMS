(window.webpackJsonp=window.webpackJsonp||[]).push([["addContent"],{"0c76":function(t,e,r){var a=r("4960");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,r("85cb").default)("1c8967b8",a,!0,{sourceMap:!1,shadowMode:!1})},"0cd6":function(t,e,r){(t.exports=r("690e")(!1)).push([t.i,".edui-default .edui-toolbar{line-height:20px!important}.dr-contentForm{padding:20px}.dr-contentForm .post-rate .el-rate{margin-top:10px}.dr-contentForm .top-card .el-card__body{padding-top:10px;padding-bottom:10px}.dr-contentForm .dr-submitContent{position:fixed;z-index:9999999;padding:10px 30px;text-align:right;right:0;bottom:0;background:none;margin-bottom:0}.dr-contentForm .avatar-uploader .el-upload{border:1px dashed #d9d9d9;border-radius:6px;cursor:pointer;position:relative;overflow:hidden}.dr-contentForm .avatar-uploader .el-upload:hover{border-color:#409eff}.dr-contentForm .avatar-uploader-icon{font-size:28px;color:#8c939d;width:200px;height:150px;line-height:150px!important;text-align:center}.dr-contentForm .avatar{width:200px;height:158px;display:block}.dr-contentForm .upSimg{position:relative}.dr-contentForm .upSimg .refresh-btn{position:absolute;left:220px;top:0}.dr-contentForm .upSimg .refresh-btn i{font-weight:400}.dr-contentForm .covers-list{overflow:hidden}.dr-contentForm .covers-list .el-col{height:100px;margin-bottom:15px}.dr-contentForm .covers-list .el-col .grid-img{border-radius:4px;overflow:hidden;height:100%;cursor:pointer;position:relative}.dr-contentForm .covers-list .el-col .grid-img .cover{display:none}.dr-contentForm .covers-list .el-col .grid-img .cover span{position:absolute;top:50%;left:50%;display:inline-block;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);color:#fff;font-size:12px;width:60px}.dr-contentForm .covers-list .el-col .grid-img .cover span svg{margin-right:4px}.dr-contentForm .covers-list .el-col .grid-img .cover .showMoreCover{color:#aaa;text-align:center;border:1px solid #eee;border-radius:50%;width:50px;height:50px;line-height:50px;-webkit-box-shadow:0 2px 12px 0 rgba(0,0,0,.1);box-shadow:0 2px 12px 0 rgba(0,0,0,.1);font-size:15px}.dr-contentForm .covers-list .el-col .grid-img img{width:100%;height:100%}.dr-contentForm .covers-list .preview{position:relative;padding-left:0!important;padding-right:0!important}.dr-contentForm .covers-list .preview .grid-img{overflow:hidden;height:100%}.dr-contentForm .covers-list .preview .grid-img .cover-title{overflow:hidden;word-break:break-word;font-family:fzlthjt}.dr-contentForm.mobile .covers-list .preview{width:300px!important;height:200px!important}.dr-contentForm.mobile .covers-list .el-col{height:50px!important}",""])},"2f53":function(t,e,r){var a=r("ffed");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,r("85cb").default)("537a2874",a,!0,{sourceMap:!1,shadowMode:!1})},4960:function(t,e,r){(t.exports=r("690e")(!1)).push([t.i,".dr-pagination{text-align:center;margin:15px auto}",""])},6258:function(t,e,r){"use strict";var a=r("dd95");r.n(a).a},"660e":function(t,e,r){"use strict";var a=r("2f53");r.n(a).a},9856:function(t,e,r){"use strict";r.r(e);r("5ab2"),r("6d57"),r("e10e"),r("f548"),r("9a33"),r("163d");var a=r("ce3c"),o=(r("6a61"),r("cf7f")),i=(r("cc57"),r("2b45"),r("196d")),s=r.n(i),n=r("330f"),l=r("cc48"),c=r("60bb"),d=r.n(c),m=r("5880"),p={props:{device:String,pageInfo:Object,pageType:String},methods:{renderPageList:function(t,e){var r=0<arguments.length&&void 0!==t?t:1,t=1<arguments.length&&void 0!==e?e:10,e=this.pageInfo?this.pageInfo.type:"";this.$store.dispatch("content/getContentCoverList",{current:r,pageSize:t,type:e})},handleSizeChange:function(t){var e=this.pageInfo?this.pageInfo.current:1;this.renderPageList(e,t)},handleCurrentChange:function(t){var e=this.pageInfo?this.pageInfo.pageSize:10;this.renderPageList(t,e)}},data:function(){return{}}},i=(r("cdac"),r("9ca4")),c=Object(i.a)(p,function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("div",{staticClass:"block dr-pagination"},[e.pageInfo?t("div",["mobile"==e.device?t("div",[t("el-pagination",{attrs:{"current-page":e.pageInfo.current,"page-size":e.pageInfo.pageSize,small:"",layout:"prev, pager, next",total:e.pageInfo.totalItems},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.pageInfo,"current",t)},"update:current-page":function(t){return e.$set(e.pageInfo,"current",t)}}})],1):t("div",[t("el-pagination",{attrs:{"current-page":e.pageInfo.current,"page-sizes":[30,50],"page-size":e.pageInfo.pageSize,layout:"sizes, prev, pager, next",total:e.pageInfo.totalItems},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.pageInfo,"current",t)},"update:current-page":function(t){return e.$set(e.pageInfo,"current",t)}}})],1)]):e._e()])},[],!1,null,null,null).exports;function u(e,t){var r,a=Object.keys(e);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(e),t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)),a}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){Object(a.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var p={props:{dialogState:Object,targetCover:Object,coverTypeList:Array,device:String},data:function(){return{targetCoverList:[]}},computed:g(g({},Object(m.mapGetters)(["contentCoverList"])),{},{formState:function(){return this.$store.getters.contentFormState},coverActiveStyle:function(){return{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.4)",display:"block"}},currentType:function(){return d.a.isEmpty(this.contentCoverList)||d.a.isEmpty(this.contentCoverList.docs)?"":this.contentCoverList.docs[0].type._id}}),components:{CoverPagination:c},methods:{handleTypeClick:function(t){t=this.coverTypeList[t.index];this.$store.dispatch("content/getContentCoverList",{type:t._id,pageSize:30})},selectThisCover:function(t){d.a.isEmpty(t)||(this.$emit("updateTargetCover",t),this.$store.dispatch("content/showContentForm",{edit:this.formState.edit,formData:Object.assign({},this.formState.formData,{cover:t._id})}),this.$store.dispatch("content/hideCoverListDialog"))}},mounted:function(){}},c=(r("660e"),Object(i.a)(p,function(){var r=this,t=r.$createElement,a=r._self._c||t;return a("div",{class:"dr-contentCoverForm "+r.device},[a("el-dialog",{staticClass:"cover-dialog",attrs:{xs:20,sm:20,md:4,lg:4,xl:4,title:"选择封面",width:"60%",visible:r.dialogState.show,"close-on-click-modal":!1},on:{"update:visible":function(t){return r.$set(r.dialogState,"show",t)}}},[a("el-tabs",{staticStyle:{height:"400px"},attrs:{"tab-position":"top"},on:{"tab-click":r.handleTypeClick},model:{value:r.currentType,callback:function(t){r.currentType=t},expression:"currentType"}},r._l(r.coverTypeList,function(t){return a("el-tab-pane",{key:t._id,attrs:{name:t._id,label:t.name}},[a("el-row",{staticClass:"dialog-covers-list",staticStyle:{"padding-left":"10px"},attrs:{gutter:20}},r._l(r.contentCoverList.docs,function(e){return a("el-col",{key:e._id,attrs:{xs:8,md:3}},[a("div",{staticClass:"grid-img",style:e.backgroundDefaultCss?JSON.parse(e.backgroundDefaultCss):"",on:{click:function(t){return r.selectThisCover(e)}}},[a("img",{attrs:{src:e.cover}}),a("div",{staticClass:"cover",style:r.formState.formData.cover==e._id?r.coverActiveStyle:{}},[a("span",[a("svg-icon",{attrs:{"icon-class":"icon_check_right"}}),r._v("已选择\n                ")],1)])])])}),1),a("CoverPagination",{attrs:{device:r.device,pageInfo:r.contentCoverList.pageInfo}})],1)}),1)],1)],1)},[],!1,null,null,null).exports),f=r("e9d9"),p=r("072e"),h=r.n(p);function v(e,t){var r,a=Object.keys(e);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(e),t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)),a}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach(function(t){Object(a.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}m={props:{groups:Array},data:function(){var a=this;return{dataURL:"",coverImg:"https://cdn.html-js.cn/cms/covers/1.png",targetCover:"",coverTypeList:[],wordFileList:[],wordFileUrl:"",sidebarOpened:!0,device:"desktop",contentState:[{value:"0",label:"退回"},{value:"1",label:"待审核"},{value:"2",label:"审核通过"},{value:"3",label:"审核不通过"}],selectUserList:[],loading:!1,userLoading:!1,selectSpecialList:[],selectCoverList:[],content:"",simpleComments:"",isflash:!1,config:{initialFrameWidth:null,initialFrameHeight:320},editorConfig:{autoHeightEnabled:!1,initialFrameHeight:600,initialFrameWidth:"100%",serverUrl:"/api/upload/ueditor",UEDITOR_HOME_URL:this.$root.staticRootPath+"/plugins/ueditor/"},imageUrl:"",categoryProps:{value:"_id",label:"name",children:"children"},currentType:"1",rules:{targetUser:[{required:!0,message:this.$t("validate.selectNull",{label:"指定用户"}),trigger:"blur"}],sImg:[{required:!0,message:this.$t("validate.selectNull",{label:"缩略图"}),trigger:"blur"}],categories:[{required:!0,message:this.$t("validate.selectNull",{label:this.$t("contents.categories")}),trigger:"blur"}],title:[{required:!0,message:this.$t("validate.inputNull",{label:this.$t("contents.title")}),trigger:"blur"},{min:2,max:50,message:this.$t("validate.rangelength",{min:2,max:50}),trigger:"blur"}],tags:[{required:!0,message:this.$t("validate.inputNull",{label:this.$t("contents.tags")}),trigger:"blur"},{validator:function(t,e,r){d.a.isEmpty(e)?r(new Error(a.$t("validate.selectNull",{label:a.$t("contents.tags")}))):r()},trigger:"change"}],discription:[{required:!0,message:this.$t("validate.inputNull",{label:this.$t("contents.discription")}),trigger:"blur"},{min:5,max:300,message:this.$t("validate.rangelength",{min:5,max:100}),trigger:"blur"}],comments:[{required:!0,message:this.$t("validate.inputNull",{label:this.$t("contents.comments")}),trigger:"blur"},{min:5,message:this.$t("validate.rangelength",{min:5,max:1e5}),trigger:"blur"}]}}},components:{VueUeditorWrap:s.a,CoverTable:c},methods:{updateTargetCover:function(t){this.targetCover=t},showMoreCovers:function(){var t;this.$store.dispatch("content/showCoverListDialog"),d.a.isEmpty(this.coverTypeList)||(t=(d.a.isEmpty(this.targetCover)?this.coverTypeList[0]:this.targetCover.type)._id,this.$store.dispatch("content/getContentCoverList",{type:t,pageSize:30}))},htmlToImage:function(){return new Promise(function(e,r){var t=document.getElementsByClassName("preview")[0],a=t.offsetWidth,o=t.offsetHeight,i=document.createElement("canvas");t.getBoundingClientRect();i.width=+a,i.height=+o;var s=i.getContext("2d");s.scale(1,1);var n=window.scrollY;s.translate(0,-n);o={scale:1,canvas:i,width:a,height:o,taintTest:!0,useCORS:!0,dpi:window.devicePixelRatio,background:"#fff"};h()(t,o).then(function(t){t=t.toDataURL("image/png",1),t={base64:t.toString().substring(t.indexOf(",")+1)};Object(l.p)(t).then(function(t){200===t.status?e(t.data):r(t.message)})})})},selectThisCover:function(t){d.a.isEmpty(t)||(this.targetCover=t,this.formState.formData.cover=t._id)},handleWordRemove:function(){},handleWordPreview:function(){},handleWordExceed:function(t,e){this.$message.warning("当前限制选择 1 个文件，本次选择了 ".concat(t.length," 个文件，共选择了 ").concat(t.length+e.length," 个文件"))},beforeWordRemove:function(t){return this.$confirm("确定移除 ".concat(t.name,"？"))},uploadWordSuccess:function(t){Object(f.b)(),this.wordFileUrl=t.data?t.data:"",this.ueditorObj.setContent(t.data),this.$message({message:"恭喜，导入成功！",type:"success"})},beforeWordUpload:function(t){var e=0<t.type.indexOf("officedocument"),t=t.size/1024/1024<5;return e||this.$message.error("只能上传docx,doc格式！"),t||this.$message.error(this.$t("validate.limitUploadImgSize",{size:5})),e&&t&&Object(f.a)(),e&&t},queryUserListByParams:function(t){var t=0<arguments.length&&void 0!==t?t:{},e=this;Object(l.j)(t).then(function(t){t=t.data.docs;t?(e.selectUserList=t.map(function(t){return{value:t._id,label:t.userName}}),e.userLoading=!1):e.selectUserList=[]}).catch(function(t){e.selectUserList=[]})},getRandomContentImg:function(t){var e=this,t=0<arguments.length&&void 0!==t?t:{};Object(l.h)(t).then(function(t){200==t.status&&t&&t.data&&(t=t.data[0],t=Object.assign({},e.formState.formData,{sImg:t}),e.$store.dispatch("content/showContentForm",{formData:t}))}).catch(function(t){})},queryCoverListByParams:function(t){var r=this,t=0<arguments.length&&void 0!==t?t:{},a=this;Object(l.e)(t).then(function(t){var e=t.data.docs;e?(a.selectCoverList=e,setTimeout(function(){r.$route.params.id?Object(l.d)({id:a.formState.formData.cover}).then(function(t){d.a.isEmpty(t)||(a.targetCover=t.data,a.formState.formData.cover=t.data._id)}):(a.targetCover=e[0],a.formState.formData.cover=e[0]._id)},1e3)):a.selectCoverList=[]}).catch(function(t){a.selectUserList=[]})},queryCoverTypeListByParams:function(t){var t=0<arguments.length&&void 0!==t?t:{},e=this;Object(l.b)(t).then(function(t){t=t.data;t?(e.coverTypeList=t,t=d.a.filter(t,function(t){return t.isDefault}),d.a.isEmpty(t)||e.queryCoverListByParams({type:t[0]._id})):e.coverTypeList=[]}).catch(function(t){e.coverTypeList=[]})},checkFlashPost:function(t){this.$store.dispatch("content/showContentForm",{edit:this.formState.edit,formData:Object.assign({},this.formState.formData,{type:t?"2":"1"})})},inputEditor:function(t){this.$store.dispatch("content/showContentForm",{edit:this.formState.edit,formData:Object.assign({},this.formState.formData,{markDownComments:t})})},changeEditor:function(){},getLocalContents:function(){var t=localStorage.getItem("addContent")||"";return t?JSON.parse(t):{}},editorReady:function(t){this.ueditorObj=t},handleAvatarSuccess:function(t){t=t.data.path;this.$store.dispatch("content/showContentForm",{edit:this.formState.edit,formData:Object.assign({},this.formState.formData,{sImg:t})})},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type,r="image/png"===t.type,a="image/gif"===t.type,t=t.size/1024/1024<2;return e||r||a||this.$message.error(this.$t("validate.limitUploadImgType")),t||this.$message.error(this.$t("validate.limitUploadImgSize",{size:2})),(e||r||a)&&t},handleChangeCategory:function(){},backToList:function(){this.$router.push(this.$root.adminBasePath+"/content")},submitForm:function(t){var a=this;this.$refs[t].validate(function(){var e=Object(o.a)(regeneratorRuntime.mark(function t(e){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=26;break}if(t.prev=1,r=Object.assign({},a.formState.formData,{comments:a.ueditorObj.getContent(),simpleComments:a.ueditorObj.getPlainTxt()}),"1"==a.formState.formData.sImgType)return t.next=6,a.htmlToImage();t.next=7;break;case 6:r.sImg=t.sent;case 7:if(!a.formState.edit){t.next=11;break}Object(l.l)(r).then(function(t){200===t.status?(a.$router.push(a.$root.adminBasePath+"/content"),a.$message({message:a.$t("main.updateSuccess"),type:"success"})):a.$message.error(t.message)}),t.next=19;break;case 11:if(d.a.isEmpty(a.adminUserInfo)||d.a.isEmpty(a.adminUserInfo.targetEditor)){t.next=15;break}r.targetUser=a.adminUserInfo.targetEditor._id,t.next=18;break;case 15:return a.$message.error("在添加文档之前，您需要指定一个默认编辑！"),a.$router.push(a.$root.adminBasePath+"/content"),t.abrupt("return",!1);case 18:Object(l.a)(r).then(function(t){200===t.status?(a.$router.push(a.$root.adminBasePath+"/content"),a.$message({message:a.$t("main.addSuccess"),type:"success"})):a.$message.error(t.message)});case 19:t.next=24;break;case 21:t.prev=21,t.t0=t.catch(1),a.$message.error(t.t0.message);case 24:t.next=28;break;case 26:return t.abrupt("return",!1);case 28:case"end":return t.stop()}},t,null,[[1,21]])}));return function(t){return e.apply(this,arguments)}}())}},computed:b(b({},Object(m.mapGetters)(["contentTagList","contentCategoryList","adminUserInfo","contentCoverDialog"])),{},{formState:function(){return this.$store.getters.contentFormState},classObj:function(){return{hideSidebar:!this.sidebarOpened,openSidebar:this.sidebarOpened,withoutAnimation:"false",mobile:"mobile"===this.device}},coverActiveStyle:function(){return{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.4)",display:"block"}},currentStyle:function(){return Object.assign({},{color:this.targetCover.titleColor,fontSize:Number(this.targetCover.titleSize)+"px"})},renderPreviewBackground:function(){var t=this.targetCover.backgroundDefaultCss,e={backgroundImage:"url("+this.targetCover.cover+")",backgroundSize:"cover",width:this.targetCover.width+"px",height:this.targetCover.height+"px"};return d.a.isEmpty(t)||Object.assign(e,JSON.parse(t)),e},renderPreviewTitle:function(){var t=this.formState.formData.stitle,e=this.targetCover;if(d.a.isEmpty(e)||d.a.isEmpty(e.type))return"";if(t){e=t.split("--"),t=this.targetCover.type.structure.replace("content_title",t);return 2==e.length&&0<=this.targetCover.type.structure.indexOf("content_title_1")&&(t=this.targetCover.type.structure.replace("content_title",e[0]).replace("content_title_1",e[1])),t}return this.targetCover.type.structure}}),mounted:function(){var o=this;Object(n.a)(this),this.queryCoverTypeListByParams({isDefault:!0}),this.$store.dispatch("adminUser/getUserInfo");var e,r=this;this.$route.params.id?Object(l.g)({id:this.$route.params.id}).then(function(t){var e,r,a;200===t.status?t.data?(e=t.data,r=[],a=[],e.categories&&(e.categories=d.a.sortBy(e.categories,function(t){return"0"!=t.parentId}),e.categories.map(function(t,e){t&&r.push(t._id)}),e.categories=r),e.tags&&(e.tags.map(function(t,e){t&&a.push(t._id)}),e.tags=a),e.keywords&&(e.keywords=e.keywords.join()),e.uAuthor&&(o.queryUserListByParams({searchkey:e.uAuthor.userName}),e.targetUser=e.uAuthor._id),o.$store.dispatch("content/showContentForm",{edit:!0,formData:e})):o.$message({message:o.$t("validate.error_params"),type:"warning",onClose:function(){o.$router.push(o.$root.adminBasePath+"/content")}}):o.$message.error(t.message)}):(e=this.getLocalContents(),d.a.isEmpty(e)?this.getRandomContentImg():this.$confirm(this.$t("main.askForReInputContent"),this.$t("main.scr_modal_title"),{confirmButtonText:this.$t("main.confirmBtnText"),cancelButtonText:this.$t("main.cancelBtnText"),type:"warning"}).then(function(){var t=e.comments||"";r.$refs.ueditor.setContent(t),localStorage.removeItem(o.$route.path.split("/")[1]),o.$store.dispatch("content/showContentForm",{edit:!1,formData:e})}).catch(function(){localStorage.removeItem(o.$route.path.split("/")[1]),o.$message({type:"info",message:o.$t("main.scr_modal_del_error_info")})})),this.$store.dispatch("contentCategory/getContentCategoryList"),this.$store.dispatch("contentTag/getContentTagList",{pageSize:200})}},r("6258"),m=Object(i.a)(m,function(){var r=this,t=r.$createElement,a=r._self._c||t;return a("div",{staticClass:"dr-contentForm",class:r.classObj},[a("CoverTable",{attrs:{coverTypeList:r.coverTypeList,targetCover:r.targetCover,dialogState:r.contentCoverDialog,device:r.device},on:{updateTargetCover:r.updateTargetCover}}),a("div",{staticClass:"main-container"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:r.formState.formData,rules:r.rules,"label-width":"70px","label-position":"mobile"==r.device?"top":"right"}},[a("el-row",{staticStyle:{"margin-top":"10px"},attrs:{gutter:15}},[a("el-col",{attrs:{span:17}},[a("el-row",{attrs:{gutter:15}},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-card",{staticClass:"box-card"},[a("el-form-item",{attrs:{label:r.$t("contents.title"),prop:"title"}},[a("el-input",{attrs:{size:"small"},model:{value:r.formState.formData.title,callback:function(t){r.$set(r.formState.formData,"title",t)},expression:"formState.formData.title"}})],1),a("el-form-item",{attrs:{label:r.$t("contents.discription"),prop:"discription"}},[a("el-input",{attrs:{size:"small",type:"textarea"},model:{value:r.formState.formData.discription,callback:function(t){r.$set(r.formState.formData,"discription",t)},expression:"formState.formData.discription"}})],1),a("el-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{label:r.$t("contents.uploadWord"),prop:"uploadWord"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"/api/content/getWordHtmlContent","on-preview":r.handleWordPreview,"on-remove":r.handleWordRemove,"before-remove":r.beforeWordRemove,"on-success":r.uploadWordSuccess,"before-upload":r.beforeWordUpload,multiple:"",limit:1,"on-exceed":r.handleWordExceed,"file-list":r.wordFileList}},[a("el-button",{attrs:{size:"small",type:"primary"}},[r._v("上传Word文档")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[r._v("\n                        只能上传doc/docx文件，且不超过5mb\n                      ")])],1)],1)],1)],1)]),a("el-col",{staticStyle:{"margin-top":"15px"},attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple"},[a("vue-ueditor-wrap",{staticClass:"editorForm",attrs:{config:r.editorConfig},on:{ready:r.editorReady},model:{value:r.formState.formData.comments,callback:function(t){r.$set(r.formState.formData,"comments",t)},expression:"formState.formData.comments"}})],1)])],1)],1),a("el-col",{attrs:{span:7}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-card",{staticClass:"box-card"},[a("el-form-item",{attrs:{label:r.$t("contents.enable"),"label-width":"60px",prop:"state"}},[a("el-select",{attrs:{size:"small",placeholder:"审核文章"},model:{value:r.formState.formData.state,callback:function(t){r.$set(r.formState.formData,"state",t)},expression:"formState.formData.state"}},r._l(r.contentState,function(t){return a("el-option",{key:"kw_"+t.value,attrs:{label:t.label,value:t.value}})}),1)],1),"3"==r.formState.formData.state?a("el-form-item",{attrs:{label:"驳回原因","label-width":"60px",prop:"dismissReason"}},[a("el-input",{attrs:{size:"small"},model:{value:r.formState.formData.dismissReason,callback:function(t){r.$set(r.formState.formData,"dismissReason",t)},expression:"formState.formData.dismissReason"}})],1):r._e(),a("el-form-item",{attrs:{label:r.$t("contents.categories"),"label-width":"60px",prop:"categories"}},[a("el-cascader",{attrs:{size:"small",expandTrigger:"hover",options:r.contentCategoryList.docs,props:r.categoryProps},on:{change:r.handleChangeCategory},model:{value:r.formState.formData.categories,callback:function(t){r.$set(r.formState.formData,"categories",t)},expression:"formState.formData.categories"}})],1),a("el-form-item",{attrs:{label:"来源","label-width":"60px",prop:"source"}},[a("el-input",{attrs:{size:"small"},model:{value:r.formState.formData.source,callback:function(t){r.$set(r.formState.formData,"source",t)},expression:"formState.formData.source"}})],1),a("el-form-item",{attrs:{label:"关键字","label-width":"60px",prop:"keywords"}},[a("el-input",{attrs:{size:"small"},model:{value:r.formState.formData.keywords,callback:function(t){r.$set(r.formState.formData,"keywords",t)},expression:"formState.formData.keywords"}})],1),a("el-form-item",{attrs:{label:"标签","label-width":"60px",prop:"tags"}},[a("el-select",{attrs:{size:"small",multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:r.$t("validate.selectNull",{label:this.$t("contents.tags")})},model:{value:r.formState.formData.tags,callback:function(t){r.$set(r.formState.formData,"tags",t)},expression:"formState.formData.tags"}},r._l(r.contentTagList.docs,function(t){return a("el-option",{key:t._id,attrs:{label:t.name,value:t._id}})}),1)],1),a("el-form-item",{attrs:{label:r.$t("contents.sImg"),"label-width":"60px",prop:"sImgType"}},[a("el-radio",{attrs:{label:"2"},model:{value:r.formState.formData.sImgType,callback:function(t){r.$set(r.formState.formData,"sImgType",t)},expression:"formState.formData.sImgType"}},[r._v("上传")]),a("el-radio",{attrs:{label:"1"},model:{value:r.formState.formData.sImgType,callback:function(t){r.$set(r.formState.formData,"sImgType",t)},expression:"formState.formData.sImgType"}},[r._v("自动生成")])],1),"2"==r.formState.formData.sImgType?a("el-form-item",{staticClass:"upSimg",attrs:{label:"",prop:"sImg"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/api/upload/files","show-file-list":!1,"on-success":r.handleAvatarSuccess,"before-upload":r.beforeAvatarUpload,data:{action:"uploadimage"}}},[r.formState.formData.sImg?a("img",{staticClass:"avatar",attrs:{src:r.formState.formData.sImg}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),a("el-button",{staticClass:"refresh-btn",attrs:{size:"mini",plain:"",round:""},on:{click:function(t){return r.getRandomContentImg()}}},[a("svg-icon",{attrs:{"icon-class":"reload"}})],1)],1):r._e(),"1"==r.formState.formData.sImgType?a("div",[a("el-form-item",{attrs:{label:"封面","label-width":"60px",prop:"covers"}},[a("el-row",{staticClass:"covers-list",staticStyle:{"padding-left":"10px"},attrs:{gutter:15}},[r._l(r.selectCoverList,function(e){return a("el-col",{key:e._id,attrs:{xs:6,md:8}},[a("div",{staticClass:"grid-img",on:{click:function(t){return r.selectThisCover(e)}}},[a("img",{attrs:{src:e.cover}}),a("div",{staticClass:"cover",style:r.formState.formData.cover==e._id?r.coverActiveStyle:{}},[a("span",[a("svg-icon",{attrs:{"icon-class":"icon_check_right"}}),r._v("已选择\n                          ")],1)])])])}),a("el-col",{attrs:{xs:6,md:3}},[a("div",{staticClass:"grid-img",on:{click:function(t){return r.showMoreCovers()}}},[a("div",{staticClass:"cover",staticStyle:{display:"block"}},[a("span",{staticClass:"showMoreCover"},[a("svg-icon",{attrs:{"icon-class":"icon_more"}})],1)])])])],2)],1),a("el-form-item",{attrs:{label:"标题","label-width":"60px",prop:"stitle"}},[a("el-input",{attrs:{size:"small"},model:{value:r.formState.formData.stitle,callback:function(t){r.$set(r.formState.formData,"stitle",t)},expression:"formState.formData.stitle"}})],1),a("div",{attrs:{id:"view"}}),a("el-form-item",{attrs:{label:"预览","label-width":"60px",prop:"coversPreview"}},[a("div",{staticClass:"covers-list",staticStyle:{marginleft:"10px"}},[a("div",{staticClass:"preview",style:r.renderPreviewBackground},[a("div",{staticClass:"grid-img"},[a("div",{style:r.currentStyle,domProps:{innerHTML:r._s(r.renderPreviewTitle)}})])])])])],1):r._e()],1)],1)])],1),a("el-form-item",{staticClass:"dr-submitContent"},[a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:function(t){return r.submitForm("ruleForm")}}},[r._v(r._s(r.formState.edit?r.$t("main.form_btnText_update"):r.$t("main.form_btnText_save")))]),a("el-button",{attrs:{size:"medium"},on:{click:r.backToList}},[r._v(r._s(r.$t("main.back")))])],1)],1)],1)],1)},[],!1,null,null,null),e.default=m.exports},cdac:function(t,e,r){"use strict";var a=r("0c76");r.n(a).a},dd95:function(t,e,r){var a=r("0cd6");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,r("85cb").default)("35dad8d8",a,!0,{sourceMap:!1,shadowMode:!1})},ffed:function(t,e,r){(t.exports=r("690e")(!1)).push([t.i,".cover-dialog .el-dialog__body{padding-top:0!important}.dialog-covers-list{height:300px;overflow:hidden}.dialog-covers-list .el-col{height:60px;margin-bottom:15px}.dialog-covers-list .el-col .grid-img{background:#000;border-radius:4px;overflow:hidden;height:100%;cursor:pointer;position:relative}.dialog-covers-list .el-col .grid-img .cover{display:none}.dialog-covers-list .el-col .grid-img .cover span{position:absolute;top:50%;left:50%;display:inline-block;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);color:#fff;font-size:12px;width:60px}.dialog-covers-list .el-col .grid-img .cover span svg{margin-right:4px}.dialog-covers-list .el-col .grid-img img{width:100%;height:100%}.dialog-covers-list .preview{width:400px;height:269px;position:relative;padding-left:0!important;padding-right:0!important}.dialog-covers-list .preview .grid-img{overflow:hidden;height:100%}.dialog-covers-list .preview .grid-img .cover-title{overflow:hidden;word-break:break-word;font-family:fzlthjt}",""])}}]);